FROM golang:1.25-alpine

# Install air for hot reloading
RUN go install github.com/air-verse/air@latest

# Add Go bin to PATH
ENV PATH="${PATH}:/go/bin"

WORKDIR /app

# Copy go mod files
COPY go.mod go.sum ./
RUN go mod download

# Copy air config if it exists
COPY .air.toml* ./

# Expose port
EXPOSE 8080

# Use air to run the application with hot reloading
CMD ["air", "-c", ".air.toml"]

